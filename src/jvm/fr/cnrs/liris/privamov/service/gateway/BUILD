scala_library(
    name='gateway',
    dependencies=[
        '3rdparty/jvm:pgsql',
        '3rdparty/jvm/twitter/finatra:http',
        '3rdparty/jvm/twitter/finatra:httpclient',
        'src/jvm/com/twitter/querulous',
        'src/jvm/fr/cnrs/liris/accio/core/ops/transform',
        'src/jvm/fr/cnrs/liris/accio/core/model',
        'src/jvm/fr/cnrs/liris/accio/core/model:json',
        'src/jvm/fr/cnrs/liris/common/geo',
        'src/jvm/fr/cnrs/liris/common/geo:json',
    ],
    sources=rglobs('*.scala')
)

jvm_binary(
    name='bin',
    dependencies=[
        '3rdparty/jvm:logback',
        ':gateway',
    ],
    resources=[
        'src/resources/fr/cnrs/liris/privamov/svc:logback',
    ],
    main='fr.cnrs.liris.privamov.service.gateway.PrivamovGatewayServerMain',
    basename='privamov-gateway-service',
)
